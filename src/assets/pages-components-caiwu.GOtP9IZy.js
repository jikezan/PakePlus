var e=(e,a,l)=>new Promise(((s,t)=>{var o=e=>{try{n(l.next(e))}catch(a){t(a)}},i=e=>{try{n(l.throw(e))}catch(a){t(a)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,i);n((l=l.apply(e,a)).next())}));import{d as a,r as l,n as s,c as t,f as o,z as i,A as n,F as r,h as c,g as u,a as d,C as v,y as f,b as m,e as g,t as x,u as p,s as h,_ as y}from"./index-Duwb82h8.js";import{o as w}from"./uni-app.es.D2cl9MrP.js";import{j as b}from"./user.DzJKUk0Z.js";const k=y(a({__name:"caiwu",setup(a){const y=l(s("cw.cz")),k=[s("cw.cz"),s("cw.tk"),s("cw.mx")],z=uni.getStorageSync("token"),j=l([]),_=l(1),S=l(1),C=l(!1),V=l(!1);let P="1";function A(a="refresh"){return e(this,null,(function*(){if(!C.value)try{C.value=!0,"refresh"===a&&(_.value=1,j.value=[],V.value=!1);const e=yield b(z,_.value.toString(),P);j.value="refresh"===a?e.data.list:[...j.value,...e.data.list],e.data.page&&(S.value=e.data.page.pages||1,V.value=_.value>=S.value)}catch(e){console.error("加载数据失败:",e),uni.showToast({title:"sssssssssssssssssssss",icon:"none"})}finally{C.value=!1}}))}function D(){return e(this,null,(function*(){C.value||V.value||(_.value<S.value?(_.value++,yield A("more")):V.value=!0)}))}function F(e){if(!C.value){switch(_.value=1,V.value=!1,console.log("xxxxxxx",e),e){case s("cw.cz"):y.value="充值",P="1";break;case s("cw.tk"):y.value="提现",P="7";break;case s("cw.mx"):y.value="全部",P="";break;default:j.value=[]}A("refresh")}}return w((()=>{F(s("cw.cz"))})),(e,a)=>{const l=d("el-segmented"),w=d("el-divider"),b=v,z=f("infinite-scroll");return m(),t("div",{style:{width:"80%","max-width":"900px"}},[o(l,{onChange:F,modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value=e),options:k,block:"",style:{margin:"0 auto","margin-bottom":"20px",background:"rgba(255, 255, 255, 0.2)",border:"1px solid #333333","--el-segmented-item-selected-color":"#000000","--el-segmented-item-selected-bg-color":"#ffffff","--el-border-radius-base":"16px"}},null,8,["modelValue"]),i((m(),t("div",{"infinite-scroll-disabled":C.value||V.value,"infinite-scroll-distance":10,class:"scroll-container",style:{height:"calc(60vh - 180rpx)","overflow-y":"auto"}},[(m(!0),t(r,null,c(j.value,((e,a)=>{return m(),t("div",{key:a},[g("div",{class:"flex pt-20 mx-40 mt-0 flex-col-center-center",style:{color:"#fff"}},[g("div",{class:"flex-1"},[g("div",{style:{"text-align":"left"}},x((l=e.addtime,new Date(1e3*l).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/\//g,"-"))),1),g("div",{class:"pa-10 px-20 round-8 my-20",style:{"background-color":"white",color:"#000","font-size":"12px",width:"fit-content"}},[g("div",null,x(p(s)(`cw.${e.type}`)),1)])]),g("div",{style:{"font-weight":"bolder",color:"#fff"}},x(1===e.status?"+":"-")+x(e.num),1)]),o(w,{class:"mx-40"})]);var l})),128)),C.value?(m(),t("div",{key:0,class:"loading-more flex-center py-20"},[o(b,{class:"loading-text ml-10"},{default:u((()=>[h(x(p(s)("jg.jzz")),1)])),_:1})])):n("",!0),V.value?(m(),t("div",{key:1,class:"no-more-data flex-center py-20"},[o(b,{class:"no-more-text"},{default:u((()=>[h(x(p(s)("jg.msj")),1)])),_:1})])):n("",!0)],8,["infinite-scroll-disabled"])),[[z,D]])])}}}),[["__scopeId","data-v-67030a7c"]]);export{k as default};
